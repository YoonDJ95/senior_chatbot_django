<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì´ë ¥ì„œ ì‘ì„±</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Noto Sans KR', sans-serif;
        }

        .resume-container {
            max-width: 700px;
            margin: 50px auto;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            width: 100%;
            font-size: 16px;
        }

        .remove-button {
            cursor: pointer;
            color: red;
        }

        .add-section-btn {
            margin-bottom: 20px;
            /* ì¶”ê°€ ë²„íŠ¼ê³¼ ëª©ë¡ ì‚¬ì´ì˜ ê°„ê²© ì„¤ì • */
        }

        .row.g-2 {
            margin-top: 10px;
            /* í•™ë ¥ ì…ë ¥ í•„ë“œ ê°„ì˜ ê°„ê²© */
        }

        .custom-textarea {
            width: 100%;
            /* 100% ë„ˆë¹„ */
            height: 150px;
            /* ë†’ì´ ì„¤ì • */
            resize: vertical;
            /* ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œë§Œ í¬ê¸° ì¡°ì • ê°€ëŠ¥ */
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="resume-container">
            <button class="btn btn-secondary btn-back" onclick="window.history.back()">ë’¤ë¡œ ê°€ê¸°</button>
            <h2 class="text-center">ì´ë ¥ì„œ ì‘ì„±</h2>

            <form method="POST">
                {% csrf_token %}

                <!-- ì„±ëª… -->
                <div class="mb-3">
                    <h4 class="mt-4"><label for="id_full_name" class="form-label">ì„±ëª…</label></h4>
                    <div class="input-group">
                        <input type="text" class="form-control" id="id_full_name" name="full_name"
                            value="{{ resume.full_name }}" placeholder="ì„±ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" />
                        <button type="button" class="btn btn-outline-secondary recordingButton" data-lang="ko-KR"
                            data-target="id_full_name">ğŸ¤</button>
                    </div>
                </div>
                <!-- ìƒë…„ì›”ì¼ ì¶”ê°€ -->
                <div class="mb-3">
                    <h4 class="mt-4"><label for="id_birth_date" class="form-label">ìƒë…„ì›”ì¼</label></h4>
                    <input type="date" class="form-control" id="id_birth_date" name="birth_date"
                        value="{{ form.birth_date.value|default_if_none:'' }}" />
                    <button type="button" class="btn btn-outline-secondary recordingButton" data-lang="ko-KR"
                        data-target="id_birth_date">ğŸ¤</button>
                </div>

                <!-- ì´ë©”ì¼ -->
                <div class="mb-3">
                    <h4 class="mt-4"><label for="id_email_id" class="form-label">ì´ë©”ì¼</label></h4>
                    <div class="input-group">
                        <input type="text" class="form-control" id="id_email_id" name="email_id"
                            value="{{ form.email.value|default_if_none:'' }}" placeholder="ì´ë©”ì¼ ì•„ì´ë”” ì…ë ¥" />
                        <span class="input-group-text">@</span>
                        <select class="form-select" id="id_email_domain" name="email_domain">
                            <option value="">ë„ë©”ì¸ ì„ íƒ</option>
                            <option value="gmail.com">gmail.com</option>
                            <option value="naver.com">naver.com</option>
                            <option value="daum.net">daum.net</option>
                            <option value="hanmail.net">hanmail.net</option>
                            <option value="outlook.com">outlook.com</option>
                            <option value="ì§ì ‘ ì…ë ¥">ì§ì ‘ ì…ë ¥</option>
                        </select>
                    </div>
                </div>

                <!-- ì „í™”ë²ˆí˜¸ -->
                <div class="mb-3">
                    <h4 class="mt-4"><label for="id_phone_number" class="form-label">ì „í™”ë²ˆí˜¸</label></h4>
                    <div class="input-group">
                        <input type="tel" class="form-control" id="id_phone_number" name="phone_number"
                            value="{{ form.phone_number.value|default_if_none:'' }}" placeholder="ì „í™”ë²ˆí˜¸ ì…ë ¥" />
                        <button type="button" class="btn btn-outline-secondary recordingButton" data-lang="ko-KR"
                            data-target="id_phone_number" data-type="numeric">ğŸ¤</button>
                    </div>
                </div>

                <!-- ì£¼ì†Œ -->
                <div class="mb-3">
                    <h4 class="mt-4"><label for="id_address" class="form-label">ì£¼ì†Œ</label></h4>
                    <div class="input-group">
                        <input type="text" class="form-control" id="id_address" name="address"
                            value="{{ form.address.value|default_if_none:'' }}" placeholder="ì£¼ì†Œ ì…ë ¥"
                            autocomplete="street-address" />
                        <button type="button" class="btn btn-outline-secondary recordingButton" data-lang="ko-KR"
                            data-target="id_address">ğŸ¤</button>
                    </div>
                </div>

                <!-- ìƒì„¸ì£¼ì†Œ -->
                <div class="mb-3">
                    <h4 class="mt-4"><label for="id_detailed_address" class="form-label">ìƒì„¸ ì£¼ì†Œ</label></h4>
                    <div class="input-group">
                        <input type="text" class="form-control" id="id_detailed_address" name="detailed_address"
                            value="{{ form.detailed_address.value|default_if_none:'' }}" placeholder="ìƒì„¸ ì£¼ì†Œ ì…ë ¥"
                            autocomplete="address-line2" />
                        <button type="button" class="btn btn-outline-secondary recordingButton" data-lang="ko-KR"
                            data-target="id_detailed_address">ğŸ¤</button>
                    </div>
                </div>


                <div class="mb-3">
                    <h4 class="mt-4"><label class="form-label">ì„ í˜¸ ì—…ì¢…</label><br></h4>
                    <input type="checkbox" name="preferred_industries" value="ë…¸ì¸ë³µì§€ì‚¬"> ë…¸ì¸ë³µì§€ì‚¬<br>
                    <input type="checkbox" name="preferred_industries" value="ì‚¬íšŒë³µì§€ì‚¬"> ì‚¬íšŒë³µì§€ì‚¬<br>
                    <input type="checkbox" name="preferred_industries" value="ê°„í˜¸ì‚¬"> ê°„í˜¸ì‚¬<br>
                    <input type="checkbox" name="preferred_industries" value="ì˜ë£Œê¸°ìˆ ì‚¬"> ì˜ë£Œê¸°ìˆ ì‚¬<br>
                    <input type="checkbox" name="preferred_industries" value="ì¹˜ë§¤ì „ë¬¸ê°€"> ì¹˜ë§¤ì „ë¬¸ê°€<br>
                    <input type="checkbox" name="preferred_industries" value="ë…¸ì¸ì¼€ì–´ ì „ë¬¸ê°€"> ë…¸ì¸ì¼€ì–´ ì „ë¬¸ê°€<br>
                    <input type="checkbox" name="preferred_industries" value="ì¬í™œì¹˜ë£Œì‚¬"> ì¬í™œì¹˜ë£Œì‚¬<br>
                    <input type="checkbox" name="preferred_industries" value="ê¸°íƒ€" id="other-checkbox"
                        onclick="toggleOtherInput()"> ê·¸ ì™¸<br>
                    <input type="text" id="other_industry" name="other_industry" placeholder="ì§ì ‘ ì…ë ¥"
                        style="display:none;">
                </div>

                <script>
                    document.getElementById('other-industry-checkbox').addEventListener('change', function () {
                        document.getElementById('other-industry').style.display = this.checked ? 'block' : 'none';
                    });
                </script>


                <!-- í•™ë ¥ ì…ë ¥ í¼ -->
                <div class="mb-3" id="education-container">
                    <h4 class="mt-4"><label for="education_1_school" class="form-label">í•™ë ¥</label></h4>
                    <button type="button" class="btn btn-secondary add-section-btn mt-2"
                        onclick="addEducationSection()">+ í•™ë ¥ ì¶”ê°€</button>
                    <div class="row g-2 align-items-center">
                        <div class="col-3">
                            <input type="text" class="form-control" id="education_1_school" name="education[]"
                                placeholder="í•™êµëª…">
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" id="education_1_period" name="education_period[]"
                                placeholder="ë‹¤ë‹Œ ê¸°ê°„ (ì˜ˆ: 2015-2019)">
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" name="education_major[]" placeholder="ì „ê³µ" />
                            <!-- ì „ê³µ ì…ë ¥ë€ ì¶”ê°€ -->
                        </div>
                        <div class="col-2">
                            <input type="text" class="form-control" id="education_1_grade" name="education_grade[]"
                                placeholder="ì„±ì ">
                        </div>
                    </div>
                </div>



                <!-- ê²½ë ¥ ì •ë³´ -->
                <div id="experience-container" class="mb-3">
                    <h4 class="mt-4"><label for="experience_1_company" class="form-label">ê²½ë ¥</label></h4>
                    <button type="button" class="btn btn-secondary add-section-btn mt-2"
                        onclick="addExperienceSection()">+ ê²½ë ¥ ì¶”ê°€</button>
                    <div class="row g-2 align-items-center">
                        <div class="col-3">
                            <input type="text" class="form-control" id="experience_1_company"
                                name="experience_company[]" placeholder="ì§ì¥ëª…" />
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" id="experience_1_period" name="experience_period[]"
                                placeholder="ê·¼ë¬´ ê¸°ê°„ (ì˜ˆ: 2017-2020)" />
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" id="experience_1_position"
                                name="experience_position[]" placeholder="ì§ì±…" />
                        </div>
                        <div class="col-2">
                            <input type="text" class="form-control" id="experience_1_role" name="experience_role[]"
                                placeholder="ì—…ë¬´" />
                        </div>
                    </div>
                </div>

                <h4 class="mt-4">ìê²©ì¦</h4>
                <button type="button" class="btn btn-secondary add-section-btn mt-2"
                    onclick="addCertificationSection()">+ ìê²©ì¦ ì¶”ê°€</button>
                <div id="certification-container" class="mb-3">
                    <div class="row g-2 align-items-center">
                        <div class="col-4">
                            <input type="text" class="form-control" name="certification_name[]" placeholder="ìê²©ì¦ëª…" />
                        </div>
                        <div class="col-4">
                            <input type="date" class="form-control" name="certification_acquisition_date[]"
                                placeholder="ì·¨ë“ì¼ì" />
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" name="certification_issuing_agency[]"
                                placeholder="ê³µì¦ê¸°ê´€" />
                        </div>
                    </div>

                </div>


                <!-- ìê¸°ì†Œê°œ -->
                <div class="mb-3">
                    <h4 class="mt-4"><label for="id_self_introduction" class="form-label">ìê¸°ì†Œê°œ</label></h4>
                    <textarea class="custom-textarea" id="id_self_introduction" name="self_introduction"
                        placeholder="ìê¸°ì†Œê°œë¥¼ ì…ë ¥í•˜ì„¸ìš”">{{ form.self_introduction.value|default_if_none:'' }}</textarea>
                    <button type="button" class="btn btn-outline-secondary recordingButton" data-lang="ko-KR"
                        data-target="id_self_introduction">ğŸ¤</button>
                </div>

                <button type="submit" class="btn btn-primary">ì´ë ¥ì„œ ì €ì¥</button>
            </form>
        </div>
    </div>

    <!-- ìŒì„± ì¸ì‹ ê¸°ëŠ¥ ë° í•™ë ¥, ê²½ë ¥ ì¶”ê°€ ê¸°ëŠ¥ -->
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            const inputs = document.querySelectorAll('input, textarea');

            inputs.forEach(input => {
                input.addEventListener('input', function () {
                    console.log(`${input.name}: ${input.value}`);
                });
            });
            const recordingButtons = document.querySelectorAll('.recordingButton');
            let recognition;
            let isRecognizing = false;
            let activeButton = null;

            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
            } else if ('SpeechRecognition' in window) {
                recognition = new SpeechRecognition();
            } else {
                alert('Web Speech APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.');
                return;
            }

            recognition.continuous = false;
            recognition.interimResults = false;

            recordingButtons.forEach((button) => {
                button.addEventListener('click', function () {
                    const lang = button.getAttribute('data-lang');
                    const targetId = button.getAttribute('data-target');
                    const targetInput = document.getElementById(targetId);

                    if (isRecognizing) {
                        recognition.stop();
                        button.textContent = 'ğŸ¤';
                        button.style.backgroundColor = '';
                    } else {
                        recognition.lang = lang;
                        recognition.start();
                        button.textContent = 'ğŸ¤ ë…¹ìŒì¤‘...';
                        button.style.backgroundColor = '#808080';
                        activeButton = button;
                    }

                    recognition.onstart = function () {
                        isRecognizing = true;
                    };

                    recognition.onend = function () {
                        isRecognizing = false;
                        activeButton.textContent = 'ğŸ¤';
                        activeButton.style.backgroundColor = '';
                    };

                    recognition.onresult = function (event) {
                        const transcript = event.results[0][0].transcript;
                        targetInput.value = transcript;
                    };

                    recognition.onerror = function (event) {
                        console.error('ìŒì„± ì¸ì‹ ì˜¤ë¥˜:', event.error);
                    };
                });
            });
        });

        // í•™ë ¥ ì„¹ì…˜ ì¶”ê°€
        function addEducationSection() {
            const container = document.getElementById('education-container');
            const index = container.querySelectorAll('input[name="education[]"]').length + 1;

            const section = `
        <div class="row g-2 align-items-center mt-3" id="education-section-${index}">
            <div class="col-3">
                <input type="text" class="form-control" name="education[]" placeholder="í•™êµëª…">
            </div>
            <div class="col-3">
                <input type="text" class="form-control" name="education_period[]" placeholder="ë‹¤ë‹Œ ê¸°ê°„ (ì˜ˆ: 2015-2019)">
            </div>
            <div class="col-3">
                <input type="text" class="form-control" name="education_major[]" placeholder="ì „ê³µ" />  <!-- ì „ê³µ ì…ë ¥ë€ ì¶”ê°€ -->
            </div>
            <div class="col-2">
                <input type="text" class="form-control" name="education_grade[]" placeholder="í•™ì ">
            </div>
            <div class="col-1">
                <button type="button" class="btn btn-outline-danger" onclick="removeSection('education-section-${index}')">DEL</button>
            </div>
        </div>
    `;
            container.insertAdjacentHTML('beforeend', section);
        }

        // ê²½ë ¥ ì„¹ì…˜ ì¶”ê°€
        function addExperienceSection() {
            const container = document.getElementById('experience-container');
            const index = container.querySelectorAll('input[name="experience_company[]"]').length + 1;

            const section = `
        <div class="row g-2 align-items-center mt-3" id="experience-section-${index}">
            <div class="col-3">
                <input type="text" class="form-control" name="experience_company[]" placeholder="ì§ì¥ëª…">
            </div>
            <div class="col-3">
                <input type="text" class="form-control" name="experience_period[]" placeholder="ê·¼ë¬´ ê¸°ê°„ (ì˜ˆ: 2017-2020)">
            </div>
            <div class="col-3">
                <input type="text" class="form-control" name="experience_position[]" placeholder="ì§ì±…">
            </div>
            <div class="col-2">
                <input type="text" class="form-control" name="experience_role[]" placeholder="ì—…ë¬´">
            </div>
            <div class="col-1">
                <button type="button" class="btn btn-outline-danger" onclick="removeSection('experience-section-${index}')">DEL</button>
            </div>
        </div>
    `;
            container.insertAdjacentHTML('beforeend', section);
        }

        function addCertificationSection() {
            const container = document.getElementById('certification-container');
            const index = container.querySelectorAll('input[name="certification_name[]"]').length + 1;
            const section = `
          <div class="row g-2 align-items-center mt-3" id="Certification-section-${index}">
            <div class="col-4">
              <input type="text" class="form-control" name="certification_name[]" placeholder="ìê²©ì¦ëª…" />
            </div>
            <div class="col-4">
              <input type="date" class="form-control" name="certification_acquisition_date[]" placeholder="ì·¨ë“ì¼ì" />
            </div>
            <div class="col-3">
              <input type="text" class="form-control" name="certification_issuing_agency[]" placeholder="ê³µì¦ê¸°ê´€" />
            </div>
            <div class="col-1">
                <button type="button" class="btn btn-outline-danger" onclick="removeSection('Certification-section-${index}')">DEL</button>
            </div>
          </div>
        `;
            container.insertAdjacentHTML('beforeend', section);
        }

        // ì„¹ì…˜ ì‚­ì œ
        function removeSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.remove();
            }
        }


            function toggleOtherInput() {
    var checkbox = document.getElementById('other-checkbox');
            var otherInput = document.getElementById('other_industry');
            if (checkbox.checked) {
                otherInput.style.display = 'block';
    } else {
                otherInput.style.display = 'none';
            otherInput.value = ''; // ì²´í¬ë°•ìŠ¤ í•´ì œ ì‹œ ì…ë ¥ë€ ì´ˆê¸°í™”
    }
}
    </script>


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>